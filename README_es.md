<h1 align="center">
  <img alt="SML logo" src="https://github.com/alexminator/SML/blob/master/img/SML.png" width="300px"/><br/>
  ${\color{#ff0000}S}{\color{#ff6e00}m}{\color{#ffdd00}a}{\color{#b2ff00}r}{\color{#48ff00}t}\ {\color{#00ff26}M}{\color{#00ff95}u}{\color{#00fbff}s}{\color{#0091ff}i}{\color{#0022ff}c}\ {\color{#4d00ff}L}{\color{#b700ff}a}{\color{#ff00d9}m}{\color{#ff006a}p} $
</h1>
<h4 align="center">
  <a href="https://github.com/alexminator/SML/blob/master/README_es.md">
    <img height="20px" src="https://img.shields.io/badge/ES-flag.svg?color=555555&style=flat-square&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3NTAgNTAwIj4NCjxwYXRoIGZpbGw9IiNjNjBiMWUiIGQ9Im0wLDBoNzUwdjUwMGgtNzUweiIvPg0KPHBhdGggZmlsbD0iI2ZmYzQwMCIgZD0ibTAsMTI1aDc1MHYyNTBoLTc1MHoiLz4NCjwvc3ZnPg0K">
  </a>
  <a href="https://github.com/alexminator/SML/blob/master/README.md">
    <img height="20px" src="https://img.shields.io/badge/EN-flag.svg?color=555555&style=flat-square&logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNjAgMzAiIGhlaWdodD0iNjAwIj4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJ0Ij4NCjxwYXRoIGQ9Im0zMCwxNWgzMHYxNXp2MTVoLTMwemgtMzB2LTE1enYtMTVoMzB6Ii8+DQo8L2NsaXBQYXRoPg0KPC9kZWZzPg0KPHBhdGggZmlsbD0iIzAwMjQ3ZCIgZD0ibTAsMHYzMGg2MHYtMzB6Ii8+DQo8cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iNiIgZD0ibTAsMGw2MCwzMG0wLTMwbC02MCwzMCIvPg0KPHBhdGggc3Ryb2tlPSIjY2YxNDJiIiBzdHJva2Utd2lkdGg9IjQiIGQ9Im0wLDBsNjAsMzBtMC0zMGwtNjAsMzAiIGNsaXAtcGF0aD0idXJsKCN0KSIvPg0KPHBhdGggc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEwIiBkPSJtMzAsMHYzMG0tMzAtMTVoNjAiLz4NCjxwYXRoIHN0cm9rZT0iI2NmMTQyYiIgc3Ryb2tlLXdpZHRoPSI2IiBkPSJtMzAsMHYzMG0tMzAtMTVoNjAiLz4NCjwvc3ZnPg0K">
  </a>
</h4>

<a name="readme-top"></a>

<h1 align="center">
  
[![GitHub repo size](https://img.shields.io/github/repo-size/alexminator/SML?logo=github&style=plastic)](https://github.com/alexminator/SML/)
[![GitHub License](https://img.shields.io/github/license/alexminator/SML.svg?logo=github&style=plastic&colorB=68B7EB)](https://github.com/alexminator/SML/blob/master/LICENSE)
[![GitHub stars](https://img.shields.io/github/stars/alexminator/SML.svg?style=plastic&logo=github&color=yellow)](https://github.com/alexminator/SML/stargazers) 
[![GitHub forks](https://img.shields.io/github/forks/alexminator/SML.svg?logo=github&color=teal&style=plastic)](https://github.com/alexminator/SML/network/members)
[![GitHub top language](https://img.shields.io/github/languages/top/alexminator/SML?logo=github&style=plastic&color=blueviolet)](https://github.com/alexminator/SML/)
[![GitHub contributors](https://img.shields.io/github/contributors/alexminator/SML?logo=github&style=plastic)](https://github.com/alexminator/SML/)
[![Watchers](https://img.shields.io/github/watchers/alexminator/SML?logo=github&color=teal&style=plastic)](https://github.com/alexminator/SML/watchers)  
</h1> 

<h4 align="center">:star: Dame una estrella — me motivará a seguir mejorándolo!</h4>

<!-- TABLE OF CONTENTS -->
<details>
  <summary>Tabla de Contenido</summary>
  <ol>
    <li>
      <a href="#sobre-el-proyecto">Sobre el proyecto</a>
      <ul>
        <li><a href="#metas">Metas</a></li>
      </ul>
    </li>
    <li>
      <a href="#comencemos">Comencemos</a>
      <ul>
        <li><a href="#componentes">Componentes</a></li>
        <li><a href="#instalación">Instalación</a></li>
        <li><a href="#diagrama">Diagrama</a></li>
        <li><a href="#código">Código</a></li>
      </ul>
    </li>
    <li><a href="#por-hacer">Por hacer</a></li>
    <li><a href="#colaboradores">Colaboradores</a></li>
    <li><a href="#licencia">Licencia</a></li>
    <li><a href="#contacto">Contacto</a></li>
    <li><a href="#programas">Programas</a></li>
    <li><a href="#agradecimientos">Agradecimientos</a></li>
  </ol>
</details>

<!-- ABOUT THE PROJECT -->
## ${\color{#ffdd00} Sobre \space el \space proyecto}$ 

${\color{#ff0000}S}{\color{#ff6e00}M}{\color{#ffdd00}L}$ *(**Smart Music Lamp**)* es un proyecto que surgió con la idea de crear una lámpara controlada por wifi y termino convirtiéndose en mucho más que eso. Se inició con la intención de hacer una versión personal de un sonoff y se decidió usar el esp32, cuya potencia era más que suficiente para la tarea.
Pensándolo mejor, era una pena desperdiciar tanta potencia en una simple tarea de encender y apagar una lámpara.

¿Entonces qué debía agregar para explotar realmente el esp32 y me quedara un producto más completo y funcional?

Al ver a mi mujer cocinando y oyendo música desde el móvil, el cual dejaba en cualquier lado, me vino la idea de dotar a la lámpara de un sistema de audio *(speaker bluetooth)*. Le dije, no sería genial cocinar oyendo música sin tener que dejar el móvil regado en cualquier parte. Podrás controlar el encendido de la lámpara y a la vez pasar la música desde el móvil vía bluetooth a la lámpara y tener música en la cocina.

Si ya tengo una lámpara que reproduce música, ¿por qué no hacerla más alegre y dotarla de colores?

Para ello, agregué una tira de **neopixels** que también son controlados vía web desde el móvil, dando la posibilidad de efectos de luces incluyendo efectos al compás de la música que reproduce la lámpara.
No contento aun, agregué un sensor de temperatura y humedad para tener esos datos reflejados en la web embebida en el esp32.

Como vivo en un país que los cortes de energía son muy comunes y tenía la posibilidad de reproducir música en la lámpara, ¿por qué no aprovecharlo?

Implementé un sistema de alimentación dual *(fuente y batería)* que permite seguir controlando la lámpara vía web y escuchar música luego de un corte de energía. Como es lógico, no podría usar los **neopixels** ya que consumen mucho.

### ${\color{#ffdd00} Metas}$ 

- **_Control de encendido de la lampara desde el móvil._**
- **_Reproducción de música en la lampara vía bluetooth desde el móvil._**
- **_Control de la tira neopixel para los diferentes efectos de luces._**
- **_Monitoreo de la carga y el uso de la batería._**
- **_Control vía web de los botones físicos del altavoz bluetooth._**
- **_Implementación de una web embebida para el control en tiempo real desde el móvil._**

<a href="#readme-top"><img align="right" border="0" src="https://github.com/alexminator/SML/blob/master/img/up_arrow.png" width="22" ></a>

---

<!-- GETTING STARTED -->
## ${\color{#ffdd00} Comencemos}$ 

[![Arduino](https://img.shields.io/badge/Arduino-Project-teal.svg?colorA=teal&colorB=red&style=for-the-badge)](https://github.com/alexminator/SML/)

Poner aqui un video del sml en accion

### ${\color{#ffdd00} Componentes}$

Para este proyecto se eligio el esp32 por su potencia, cantidad de entradas analogicas y conexion Wifi.
El mismo tendra una alimentacion dual, empleandose una fuente de 5v y una bateria de 3.7 v. Un cargador con proteccion sera el encargado de cargar la bateria y un convertidor DC-DC step up de elevar el voltaje de la misma a 5V para alimentar el esp32 y el resto de los modulos menos la tira de neopixels que se alimentara siempre de la fuente.
Un modulo relay dual sera el encargado de controlar el encendido de la lampara led y del modulo bluetooth. Para la reproduccion de musica utilice uno de esos altavoces bluetooth portatiles muy comunes que se pueden encontrar muy baratos como los de la siguiente imagen

![BTspeaker](https://github.com/alexminator/SML/blob/master/img/speakerBT.jpg?raw=true)

Los componentes necesarios son:

- **Arduino Nano**
- **Pantalla LCD 20x4**
- **Botón**
- **Zumbador**
- **Resistencia valor 10K**
- **Sensor ultrasónico a prueba de agua [JSN-SR04T](https://naylampmechatronics.com/img/cms/Datasheets/JSN-SR04T-2-0.pdf)**
